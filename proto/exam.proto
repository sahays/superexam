syntax = "proto3";

package superexam.exam;

service ExamService {
  rpc GetAvailableQuestionCount (Empty) returns (CountResponse);
  rpc CreateExam (CreateExamRequest) returns (ExamSession);
  rpc SubmitExam (ExamSubmission) returns (ExamResult);
}

message Empty {}

message CountResponse {
  int32 count = 1;
}

message CreateExamRequest {
  int32 question_count = 1;
}

message ExamSession {
  string exam_id = 1;
  repeated Question questions = 2;
  int32 duration_seconds = 3;
}

message Question {
  string id = 1;
  string text = 2;
  repeated Choice choices = 3;
  repeated string image_urls = 4;
}

message Choice {
  string id = 1;
  string text = 2;
}

message ExamSubmission {
  string exam_id = 1;
  repeated Answer answers = 2;
}

message Answer {
  string question_id = 1;
  repeated string selected_choice_ids = 2;
}

message ExamResult {
  string exam_id = 1;
  int32 score = 2;
  int32 total_score = 3;
  bool passed = 4;
}
